!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n.r(t);var i=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentID=0,this.logs=[],this.enabled=t}var t,n,i;return t=e,(n=[{key:"push",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.enabled&&(e.ID=++this.currentID,this.logs.push(e))}},{key:"doing",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.push({doing:e})}},{key:"getLast",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.logs.slice(-e)}},{key:"logLast",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;console.log(this.getLast(e))}},{key:"get",value:function(){return this.logs}},{key:"log",value:function(){console.log(this.logs)}},{key:"debug",value:function(e){GAME.options.debugMode&&console.log("DEBUG LOG: "+e)}},{key:"debugWarning",value:function(e){GAME.options.debugMode&&console.warn("DEBUG LOG: "+e)}},{key:"debugError",value:function(e){GAME.options.debugMode&&console.error("DEBUG LOG: "+e)}}])&&o(t.prototype,n),i&&o(t,i),e}();function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentControlID=0,this.controls=[],this.menuTexture=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI(t)}var t,n,o;return t=e,(n=[{key:"addButton",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=BABYLON.GUI.Button.CreateSimpleButton(e,t);return o.width=n.width||.5,o.height=n.height||"60px",o.color=n.color||"black",o.outlineWidth=n.outlineWidth||0,o.outlineColor=n.outlineColor||o.color,o.background=n.background||"white",o.left=n.left||"0px",o.top=n.top||"0px",o.textHorizontalAlignment=void 0!==n.horizontalAlignment?n.horizontalAlignment:BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER,o.textVerticalAlignment=void 0!==n.verticalAlignment?n.verticalAlignment:BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,n.onclick&&o.onPointerUpObservable.add(n.onclick),this.menuTexture.addControl(o),this.add(o),o}},{key:"addText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new BABYLON.GUI.TextBlock;return n.text=e,n.color=t.color||"white",n.fontSize=t.fontSize||28,n.outlineWidth=t.outlineWidth||0,n.outlineColor=t.outlineColor||"black",n.lineSpacing=t.lineSpacing||"5px",n.left=t.left||"0px",n.top=t.top||"0px",n.textHorizontalAlignment=void 0!==t.horizontalAlignment?t.horizontalAlignment:BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER,n.textVerticalAlignment=void 0!==t.verticalAlignment?t.verticalAlignment:BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,n.textWrapping=t.wrapping||!0,this.menuTexture.addControl(n),this.add(n),n}},{key:"add",value:function(e){e.uiControlID=this.currentControlID++,this.controls.push(e)}},{key:"remove",value:function(e){e.isVisible=!1,this.controls.splice(e.uiControlID,1)}},{key:"show",value:function(){this.controls.forEach(function(e){return e.isVisible=!0})}},{key:"hide",value:function(){this.controls.forEach(function(e){return e.isVisible=!1})}}])&&r(t.prototype,n),o&&r(t,o),e}();function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.level=t,this.scene=t.scene,this.fireRate=1,this.canFire=!0,this.currentFireRate=0}var t,n,o;return t=e,(n=[{key:"create",value:function(){this.mesh=this.level.assets.getMesh("shotgun"),this.mesh.isVisible=!0,this.mesh.rotationQuaternion=null,this.mesh.rotation.y=-Math.PI/2,this.mesh.parent=this.level.camera,this.mesh.position=new BABYLON.Vector3(.7,-.45,1.3),this.mesh.scaling=new BABYLON.Vector3(2,2,2),this.controlFireRate()}},{key:"fire",value:function(){var e=this.scene.getEngine().getRenderWidth(),t=this.scene.getEngine().getRenderHeight();if(this.level.controlEnabled){var n=this.scene.pick(e/2,t/2,null,!1,this.camera);this.doFire(n)}}},{key:"doFire",value:function(e){if(this.canFire){if(e.hit&&"enemy"===e.pickedMesh.name)e.pickedMesh.dispose();else if(e.pickedPoint)BABYLON.Mesh.CreateBox("box",.1,this.scene).position=e.pickedPoint.clone();this.animateFire(),this.canFire=!1}}},{key:"animateFire",value:function(){var e=this;this.level.interpolate(this.mesh.position,"z",1,100),setTimeout(function(){e.level.interpolate(e.mesh.position,"z",1.3,100)},100)}},{key:"controlFireRate",value:function(){this.canFire||(this.currentFireRate-=GAME.engine.getDeltaTime(),this.currentFireRate<=0&&(this.canFire=!0,this.currentFireRate=this.fireRate))}}])&&a(t.prototype,n),o&&a(t,o),e}();function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.meshes=[],this.sounds=[],this.manager=new BABYLON.AssetsManager(this.scene),this.manager.onFinish=function(e){n&&n(e)}}var t,n,o;return t=e,(n=[{key:"addSound",value:function(e,t,n){var o=this;return this.manager.addBinaryFileTask(e+"__SoundTask",t).onSuccess=function(t){o.sounds[e]=new BABYLON.Sound(e,t.data,o.scene,null,n),n.onSuccess&&n.onSuccess(o.sounds[e])},this.sounds[e]}},{key:"addMusic",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.loop=void 0===n.loop||n.loop,n.volume=void 0!==n.volume?n.volume:.5,n.autoplay=void 0===n.autoplay||n.autoplay,this.addSound(e,t,n)}},{key:"addMergedMesh",value:function(e,t,n){return this.addMesh(e,t,n,!0)}},{key:"addMesh",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.manager.addMeshTask(e+"__MeshTask","",t).onSuccess=function(t){var r=t.loadedMeshes;i&&(r=BABYLON.Mesh.MergeMeshes(t.loadedMeshes)),n.meshes[e]=r,o.onSuccess&&o.onSuccess(n.meshes[e])},this.meshes[e]}},{key:"getMesh",value:function(e){return this.meshes[e]}},{key:"getSound",value:function(e){return this.sounds[e]}},{key:"load",value:function(){this.manager.load()}}])&&l(t.prototype,n),o&&l(t,o),e}();function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.materials={},this.scene=null,this.assets=null}var t,n,o;return t=e,(n=[{key:"start",value:function(){GAME.resume(),GAME.stopRenderLoop(),this.setProperties?this.setProperties():GAME.log.debugWarning("The setProperties method is recommended to initialize the Level properties"),this.createScene()}},{key:"createScene",value:function(){var e=this;return this.scene=new BABYLON.Scene(GAME.engine),this.assets=new c(this.scene,function(){GAME.log.debug("Level Assets loaded"),e.buildScene?e.buildScene():GAME.log.debugWarning("You can add the buildScene method to your level to define your scene"),e.beforeRender?e.scene.registerBeforeRender(e.beforeRender.bind(e)):GAME.log.debugWarning("You can define animations and other game logics that happends inside the main loop on the beforeRender method"),GAME.startRenderLoop()}),this.setupAssets&&this.setupAssets(),this.assets.load(),this.scene}},{key:"exit",value:function(){this.scene.dispose(),this.scene=null}},{key:"addCollider",value:function(e,t){var n=BABYLON.MeshBuilder.CreateBox(e,{width:t.width||1,height:t.height||1,depth:t.depth||1},this.scene);if(BABYLON.Tags.AddTagsTo(n,"collider boxCollider"),n.position.x=t.positionX||0,n.position.y=t.positionY||0,n.position.z=t.positionZ||0,n.isVisible=!!t.visible&&t.visible,n.isVisible){var o=new BABYLON.StandardMaterial(e+"Material");o.diffuseColor=new BABYLON.Color3(.5,.5,0),o.alpha=.5,n.material=o}return t.timeToDispose=t.timeToDispose?t.timeToDispose:0,n.actionManager=new BABYLON.ActionManager(this.scene),n.actionManager.registerAction(new BABYLON.ExecuteCodeAction({trigger:BABYLON.ActionManager.OnIntersectionEnterTrigger,parameter:t.collisionMesh},function(){t.onCollide&&t.onCollide(),t.disposeAfterCollision&&setTimeout(function(){n.dispose()},t.timeToDispose)})),n}},{key:"disposeColliders",value:function(){for(var e=this.scene.getMeshesByTags("collider"),t=0;t<e.length;t++)e[t].dispose()}},{key:"addMaterial",value:function(e){this.materials[e.name]=e}},{key:"getMaterial",value:function(e){return this.materials[e]}},{key:"removeMaterial",value:function(e){var t=null;(t=this.materials[e])&&(t.dispose(),delete this.materials[e])}},{key:"interpolate",value:function(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.scene.actionManager||(this.scene.actionManager=new BABYLON.ActionManager(this.scene));var r=new BABYLON.InterpolateValueAction(BABYLON.ActionManager.NothingTrigger,e,t,n,o);r.onInterpolationDoneObservable.add(function(){GAME.log.debug("Interpolation done"),i&&i()}),this.scene.actionManager.registerAction(r),r.execute()}},{key:"enablePointerLock",value:function(){var e=this,t=GAME.canvas;this.camera||console.error("You need to add a camera to the level to enable pointer lock"),t.addEventListener("click",function(e){t.requestPointerLock=t.requestPointerLock||t.msRequestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock&&t.requestPointerLock()},!1);var n=function(n){e.controlEnabled=document.mozPointerLockElement===t||document.webkitPointerLockElement===t||document.msPointerLockElement===t||document.pointerLockElement===t,e.controlEnabled?e.camera.attachControl(t):e.camera.detachControl(t)};document.addEventListener("pointerlockchange",n,!1),document.addEventListener("mspointerlockchange",n,!1),document.addEventListener("mozpointerlockchange",n,!1),document.addEventListener("webkitpointerlockchange",n,!1)}}])&&h(t.prototype,n),o&&h(t,o),e}();function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.level=t,this.scene=t.scene,this.mesh=null}var t,n,o;return t=e,(n=[{key:"create",value:function(){return this.mesh=BABYLON.MeshBuilder.CreateSphere("enemy",{diameter:1.5,segments:2},this.scene),this.mesh.position.x=Math.floor(100*Math.random())-50,this.mesh.position.z=Math.floor(100*Math.random())-50,this.mesh.position.y=2,this.addEnemyMaterial(),this}},{key:"addEnemyMaterial",value:function(){this.meshMaterial=new BABYLON.StandardMaterial("meshMaterial",this.scene),this.meshMaterial.diffuseColor=new BABYLON.Color3.FromHexString("#6ab04c"),this.meshMaterial.specularColor=new BABYLON.Color3(0,0,0),this.mesh.material=this.meshMaterial}},{key:"move",value:function(){}}])&&f(t.prototype,n),o&&f(t,o),e}();function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,g(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,d),n=t,(o=[{key:"setProperties",value:function(){this.menu=null,this.weapon=null,this.enemies=[]}},{key:"setupAssets",value:function(){this.assets.addMergedMesh("shotgun","/assets/models/weapons/shotgun.obj")}},{key:"buildScene",value:function(){this.scene.clearColor=new BABYLON.Color3.FromHexString(GAME.options.backgroundColor);new BABYLON.DirectionalLight("DirectionalLight",new BABYLON.Vector3(0,-1,0),this.scene);this.scene.gravity=new BABYLON.Vector3(0,-9.81,0),this.scene.collisionsEnabled=!0,this.createMenus(),this.camera=this.createCamera(),this.enablePointerLock(),this.createGround(),this.addWeapon(),this.addEnemies(),this.setupEventListeners()}},{key:"createGround",value:function(){var e=BABYLON.Mesh.CreateGround("ground",100,100,2,this.scene);e.checkCollisions=!0;var t=new BABYLON.StandardMaterial("groundMaterial",this.scene);t.diffuseTexture=new BABYLON.Texture("/assets/images/sand.jpg",this.scene),t.specularColor=new BABYLON.Color3(0,0,0),e.material=t}},{key:"addWeapon",value:function(){this.weapon=new u(this),this.weapon.create()}},{key:"addEnemies",value:function(){for(var e=0;e<10;e++){var t=new p(this).create();this.enemies.push(t)}}},{key:"setupEventListeners",value:function(){var e=this;GAME.canvas.addEventListener("click",function(){e.weapon.fire()},!1)}},{key:"createMenus",value:function(){}},{key:"createCamera",value:function(){var e=new BABYLON.UniversalCamera("UniversalCamera",new BABYLON.Vector3(0,2,-10),this.scene);return e.setTarget(new BABYLON.Vector3(0,2,0)),e.attachControl(GAME.canvas,!0),e.applyGravity=!0,e.ellipsoid=new BABYLON.Vector3(1,1,1),e.checkCollisions=!0,e._needMoveForGravity=!0,e.minZ=0,e}},{key:"beforeRender",value:function(){GAME.isPaused()||this.weapon.controlFireRate()}}])&&y(n.prototype,o),i&&y(n,i),t}();function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function A(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var M=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),A(this,B(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,d),n=t,(o=[{key:"setupAssets",value:function(){}},{key:"buildScene",value:function(){new BABYLON.FreeCamera("camera1",new BABYLON.Vector3(0,5,-10),this.scene);this.scene.clearColor=new BABYLON.Color4(0,0,0,0),this.makeUI()}},{key:"makeUI",value:function(){var e=new s("creditsUI");e.addText("Design and Code by Tiago Silva Pereira Rodrigues\nkingofcode.com.br\n\n\n",{top:"30px",fontSize:"20px",horizontalAlignment:BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_TOP}),e.addText("Music by Eric Matyas\nwww.soundimage.org\n\nPlease check the music license documentation before\nchanging the credits",{top:"140px",fontSize:"20px",horizontalAlignment:BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_TOP}),e.addButton("backButton","Return to Home",{top:"220px",background:GAME.options.backgroundColor,color:"white",onclick:function(){return GAME.goToLevel("HomeMenuLevel")}})}}])&&L(n.prototype,o),i&&L(n,i),t}();function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function T(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var S=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),T(this,N(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,d),n=t,(o=[{key:"setupAssets",value:function(){}},{key:"buildScene",value:function(){new BABYLON.FreeCamera("camera1",new BABYLON.Vector3(0,5,-10),this.scene);this.scene.clearColor=new BABYLON.Color4(0,0,0,0);var e=new s("homeMenuUI");e.addButton("playButton","Play Game",{background:GAME.options.backgroundColor,color:"white",onclick:function(){return GAME.goToLevel("FirstLevel")}}),e.addButton("creditsButton","Credits",{top:"70px",background:GAME.options.backgroundColor,color:"white",onclick:function(){return GAME.goToLevel("CreditsLevel")}})}}])&&C(n.prototype,o),i&&C(n,i),t}();function G(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.keys={},this.paused=!1,this.log=new i,this.canvas=document.getElementById("renderCanvas"),this.engine=new BABYLON.Engine(this.canvas,!0),this.currentLevel=null,this.currentLevelName="HomeMenuLevel",this.levels={HomeMenuLevel:new S,CreditsLevel:new M,FirstLevel:new k}}var t,n,o;return t=e,(n=[{key:"start",value:function(){this.listenKeys(),this.lintenTouchEvents(),this.listenOtherEvents(),this.startLevel()}},{key:"pause",value:function(){this.paused=!0}},{key:"isPaused",value:function(){return this.paused}},{key:"resume",value:function(){this.paused=!1}},{key:"listenKeys",value:function(){document.addEventListener("keydown",function(e){87==e.keyCode||38==e.keyCode?this.keys.up=1:83==e.keyCode||40==e.keyCode?this.keys.down=1:65==e.keyCode||37==e.keyCode?this.keys.left=1:68!=e.keyCode&&39!=e.keyCode||(this.keys.right=1)}.bind(this)),document.addEventListener("keyup",function(e){87==e.keyCode||38==e.keyCode?this.keys.up=0:83==e.keyCode||40==e.keyCode?this.keys.down=0:65==e.keyCode||37==e.keyCode?this.keys.left=0:68!=e.keyCode&&39!=e.keyCode||(this.keys.right=0)}.bind(this)),this.keys.up=!1,this.keys.down=!1,this.keys.left=!1,this.keys.right=!1}},{key:"lintenTouchEvents",value:function(){var e=this;if("undefined"!=typeof Hammer){var t=new Hammer(document.body);t.get("swipe").set({direction:Hammer.DIRECTION_ALL}),t.on("swipeup",function(t){e.keys.up=1,setTimeout(function(){e.keys.up=0},150)}),t.on("swipedown",function(t){e.keys.down=1,setTimeout(function(){e.keys.down=0},100)}),t.on("swipeleft",function(t){e.keys.left=2,setTimeout(function(){e.keys.left=0},150)}),t.on("swiperight",function(t){e.keys.right=2,setTimeout(function(){e.keys.right=0},150)})}}},{key:"listenOtherEvents",value:function(){var e=this;window.addEventListener("blur",function(){e.pause()}),window.addEventListener("focus",function(){e.resume()})}},{key:"goToLevel",value:function(e){this.levels[e]?(this.currentLevel&&this.currentLevel.exit(),this.currentLevelName=e,this.startLevel()):console.error("A level with name "+e+" does not exists")}},{key:"startLevel",value:function(){this.currentLevel=this.levels[this.currentLevelName],this.currentLevel.start()}},{key:"render",value:function(){var e=this;this.startRenderLoop(),window.addEventListener("resize",function(){e.engine.resize()})}},{key:"startRenderLoop",value:function(){var e=this;this.engine.runRenderLoop(function(){e.currentLevel.scene.render()})}},{key:"stopRenderLoop",value:function(){this.engine.stopRenderLoop()}},{key:"isMobile",value:function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}}])&&G(t.prototype,n),o&&G(t,o),e}();window.GAME=null;var x=function(){GAME=new Y(window.initialGameOptions),GAME.start()};window.addEventListener("DOMContentLoaded",function(){x()})}]);